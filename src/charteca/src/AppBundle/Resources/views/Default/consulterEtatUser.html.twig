{% extends 'AppBundle:Default:base-profil-all.html.twig' %}

{% block body %}

	<table class='contour' width='70%' border='0' cellpading='4' cellspacing='8'>
		<tr class='ligneTitre'><th colspan="3" class='ligneTitre' align='center'>Détail du compte ECA et journal pour l'utilisateur : uid={{ user.username }}</th></tr>

		<tr><td colspan="3" style='border: 1px #7966D0; border-bottom-style:dotted;height:10px;'></td></tr>
		<tr>
			<td></td>
			<td align='center'><form method="post" action="{{ path('consulter_etat') }}"><button type="submit" name="submit" value="Annuler">Retour à la liste des utilisateurs ECA</button></form></td>
			<td></td>
		</tr>

		<tr><td colspan="3" style='border: 1px #7966D0; border-bottom-style:dotted;height:10px;'></td></tr>
		<tr>
			<td width="15%">uid :</td>
			<td>{{ user.username }}</td>
			<td>
			{% if is_granted('ROLE_MODERATEUR') or is_granted('ROLE_ADMIN')  %}
				{% if user.etatCompte=='en_attente_activation' %}
				<a href="{{ path('moderer_demandes_utilisation', { 'id': user.id }) }}">Modérer</a>
				{% endif %}
			{% endif %}
			</td>
		</tr>
		<tr>
			<td width="15%">email :</td>
			<td>{{ user.email }}</td>
			<td></td>
		</tr>
		<tr>
			<td width="15%">etat du compte :</td>
			<td>{{ user.etatCompte }}</td>
			<td>
				{% if user.etatCompte=='revalidation_charte' and user.dateMaxiRevalidationCharte!=null %}
				Date limite de revalidation : {{ user.dateMaxiRevalidationCharte|date("d/m/Y") }} 
				{% endif %}
			</td>
		</tr>

		<tr><td colspan="3" style='border: 1px #7966D0; border-bottom-style:dotted;height:10px;'></td></tr>
		<tr>
			<td colspan="3" align='center'>
			<table width='85%' border='1' style='border-width:1px; border-collapse: collapse;' cellpading='4' cellspacing='8'>
				<tr class='ligneTitre'>
					<th colspan="2" class='ligneTitre' align='center'>Journal des actions sur le compte</th>
				</tr>
				<tr>
					<th>Date</th>
					<th>Message</th>
				</tr>
				{% for log in logs %}
				<tr>
					<td>{{ log.date|date("d/m/Y H:i:s") }}</td>
					<td>{{ log.message }}</td>
				</tr>
				{% endfor %}
			</table>
			</td>
		</tr>

	</table>

{% endblock %}
